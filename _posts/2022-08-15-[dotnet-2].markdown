---
layout: post
title: "ASP.net Core ê¸°ë³¸êµ¬ì¡°"
date: 2022-08-15 21:55:23 +09:00
excerpt: " <br>22.08.15"
cs: true
categories: dotnet
comments: true
---
# ğŸ“Œ ASP.net Core ê¸°ë³¸êµ¬ì¡°
---------------------------

<figure>
    <a href="/assets/img/dotnet/dotnetlogo.png"><img src="/assets/img/dotnet/dotnetlogo.png"></a>    
    <figcaption style="text-align:center">ê¸°ë³¸ êµ¬ì¡°ì— ëŒ€í•´ ì•Œì•„ë³´ì</figcaption>
</figure>

í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” **MicroSoft - Docs/.Net/ASP.net Core**ì˜ ê¸°ìˆ ë¬¸ì„œ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.  


<br>
<br>

# ASP .net Core ê¸°ë³¸êµ¬ì¡°
## 1ï¸âƒ£ Program.cs
ASP .net Coreë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“  í”„ë¡œì íŠ¸ëŠ” ``Program.cs``ì— ì˜í•´ íë¦„ì´ ì œì–´ëœë‹¤.  
(Program.csê°€ í¬í•¨ëœ í”„ë¡œì íŠ¸: Razor Pages, MVC, ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ìˆëŠ” Web API, ìµœì†Œ ì›¹ API)  
ê³µì‹ë¬¸ì„œì—ì„œ ê¸°ìˆ ëœ ``Program.cs``ì˜ ì—­í• ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  
> - ì•±ì—ì„œ ìš”êµ¬í•˜ëŠ” ì„œë¹„ìŠ¤ê°€ êµ¬ì„±ë©ë‹ˆë‹¤.
> - ì•±ì˜ ìš”ì²­ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ì´ ì¼ë ¨ì˜ ë¯¸ë“¤ì›¨ì–´ êµ¬ì„± ìš”ì†Œë¡œ ì •ì˜ë©ë‹ˆë‹¤.

ë‹¤ìŒ ì˜ˆì‹œì½”ë“œë¥¼ ë³´ì.  
```csharp
var builder = WebApplication.CreateBuilder(args);

// Add services to the container.
// ì„œë¹„ìŠ¤ë¥¼ ì¶”ê°€í•˜ëŠ” ë¶€ë¶„
builder.Services.AddRazorPages();
builder.Services.AddControllersWithViews();

var app = builder.Build();

// Configure the HTTP request pipeline.
if (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler("/Error");
    app.UseHsts();
}

app.UseHttpsRedirection();
app.UseStaticFiles();

app.UseAuthorization();

app.MapGet("/hi", () => "Hello!");

app.MapDefaultControllerRoute();
app.MapRazorPages();

app.Run();
```
### builder
ë¹Œë”ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì— ë¯¸ë“¤ì›¨ì–´ë¥¼ ì¶”ê°€í•´ì£¼ëŠ” ê°ì²´ì´ë‹¤.  
ë¹Œë”ë¥¼ í†µí•´ ``RazorPages``ì™€ ``ControllersWithViews`` ì„œë¹„ìŠ¤ë¥¼ ì¶”ê°€ í›„ ë¹Œë“œí–ˆë‹¤.  

ìœ„ì™€ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ DI(ì¢…ì†ì„± ì£¼ì…) í”„ë ˆì„ì›Œí¬ê°€ í¬í•¨ë˜ì–´ìˆë‹¤.  
``WebApplication.CreateBuilder(args);``ì—ì„œ DIì»¨í…Œì´ë„ˆì— ì¶”ê°€ëœë‹¤.  

### ë¯¸ë“¤ì›¨ì–´
ì„œë²„ì— ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œ, ì—¬ëŸ¬ ë¯¸ë“¤ì›¨ì–´ë¥¼ í˜¸ì¶œí•œ í›„, ìš”ì²­ì„ ì¢…ë£Œí•œë‹¤.  
ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” íŒŒì´í”„ë¼ì¸ í˜•ì‹ì„ ê°–ì¶”ê³  ìˆë‹¤. ë¯¸ë“¤ì›¨ì–´ëŠ” íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ ì¡°ë¦½ëœë‹¤.  
ìš”ì²­ íŒŒì´í”„ë¼ì¸ì„ ë¹Œë“œí•˜ëŠ” ê²ƒì„ **ìš”ì²­ ëŒ€ë¦¬ì**ë¼ê³  í•œë‹¤. ìš”ì²­ ëŒ€ë¦¬ìëŠ” ê° HTTP ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤.  
ìš”ì²­ ëŒ€ë¦¬ìëŠ” **Run**, **Map** ë° **Use** í™•ì¥ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì„±ëœë‹¤.  

<figure>
    <a href="/assets/img/dotnet/2022-08-15/middleware-pipeline.svg"><img src="/assets/img/dotnet/2022-08-15/middleware-pipeline.svg"></a>    
    <figcaption style="text-align:center">.net Coreì˜ ìš”ì²­ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸</figcaption>
</figure>

#### Use
```csharp
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();

app.Use(async (context, next) =>
{
    // Do work that can write to the Response.
    await next.Invoke();
    // Do logging or other work that doesn't write to the Response.
});

app.Run(async context =>
{
    await context.Response.WriteAsync("Hello from 2nd delegate.");
});

app.Run();
```
ìœ„ ì½”ë“œì—ì„œ ``app.Use``ë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ ëŒ€ë¦¬ìë¥¼ ì—°ê²°í•œë‹¤.  
``next`` ë§¤ê°œë³€ìˆ˜ëŠ” ë‹¤ìŒ ëŒ€ë¦¬ìì´ë‹¤.  
``next`` ë§¤ê°œë³€ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ” ê²½ìš°, ì´ë¥¼ **ìš”ì²­ íŒŒì´í”„ë¼ì¸ ë‹¨ë½(short-circuiting)**ì´ë¼ê³  í•œë‹¤.  

#### Run
```csharp
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();

app.Use(async (context, next) =>
{
    // Do work that can write to the Response.
    await next.Invoke();
    // Do logging or other work that doesn't write to the Response.
});

app.Run(async context =>
{
    await context.Response.WriteAsync("Hello from 2nd delegate.");
});

app.Run();
```

Run ëŒ€ë¦¬ìëŠ” í•­ìƒ íŒŒì´í”„ë¼ì¸ì„ ì¢…ë£Œì‹œí‚¨ë‹¤.  
ë•Œë¬¸ì— Use ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ì¸ ``next``ê°€ í•„ìš”ì—†ë‹¤.  
ê·¸ëŸ¬ë¯€ë¡œ Run ë©”ì„œë“œê°€ ì‚¬ìš©ëœ ì´í›„ì˜ Useë‚˜ ë˜ ë‹¤ë¥¸ Runì€ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.  



<br>
<br>

## 2ï¸âƒ£ 
<br>
<br>



<br>
<br>
<br>

### ì¶œì²˜
https://docs.microsoft.com/ko-kr/aspnet/core/fundamentals/?view=aspnetcore-6.0&tabs=windows  
https://docs.microsoft.com/ko-kr/aspnet/core/fundamentals/middleware/?view=aspnetcore-6.0

[jekyll-docs]: https://jekyllrb.com/docs/home
[jekyll-gh]:   https://github.com/jekyll/jekyll
[jekyll-talk]: https://talk.jekyllrb.com/

